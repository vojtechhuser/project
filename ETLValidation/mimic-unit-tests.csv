table,count,name,note,source,in_achilles,analysis_id,target_sql,source_sql,note,type,type2,value,,,
PERSON,4,PERSON -- number patients match,num_person_count match,patients,1,1,,,,,,,,,
,,PERSON -- gender distribution matches,,,1,,,,,,,,,,
,,PERSON -- date of birth year distributions match,,,1,,,,,,,,,,
,,PERSON -- no births after deaths,,,,,select 0,"SELECT person_id, CASE when death.death_datetime < person.birth_datetime THEN 1 ELSE 0 END AS abnormal",GENERAL,constant,,0,,,
VISIT_OCCURRENCE,7,same number admission,,,,,,,,,,,,,
,,number of hospital admissions who die in-hospital match,,,,,,,,,,,,,
,,same distribution adm,by admission type,,2,,,,,,,,,,
,,distribution admit source value,distribution admit source value,,,,,,,source_value,,,,,
,,repartition discharge_to_source_value,,,,,,,,source_value,,,,,
,,links checker,,,,,SELECT count(visit_source_concept_id) FROM omop.visit_occurrence group by visit_source_concept_id order by 1 desc;,,,,,,,,
,,start_date > end_date,,,,,,,GENERAL,constant,,0,,,
MEASUREMENT,7,check distribution of all labs match,,,,,,,,,,,,,
,,check microbiology organism distributions match,,,,,GROUP BY value_source_value,,,source_value,,,,,
,,there is source concept in measurement not described,,,,,,,,constant,,0,,,
,,check for duplicate primary keys,,,,,,,,key,constant,0,,,
,,standard concept checker,zero concepts that are not standard,,,,,,GENERAL,standard,constant,0,,,
,,check row counts match,,,,,,,complex,custom,,,,,
,,"SELECT pass( 'Measurement pass, w00t!' );",,,,,,,this check was excluded since it is a note during execution rather than unit test,remove,,,,,
DRUG_EXPOSURE,4,check number of patients with prescription matches,,,,,"SELECT COUNT(distinct person_id), COUNT(distinct visit_occurrence_id)",,,distinct count,,,,,
,,check drug_source_value matches source,,,,,"SELECT drug_source_value::text, COUNT(1)",,,source_value,,,,,
,,is concept source id full filled,,,,,SELECT COUNT(1)::integer FROM omop.drug_exposure WHERE drug_source_concept_id = 0; ,,,constant,,0,,,
,,Standard concept checker,"if drug concept is not zero, are the concepts standard",,,,,,GENERAL,standard,,,,,
CONDITION_OCCURRENCE,8,check ICD diagnoses row count matches,distinct count,,,,,,,distinct count,,,,,
,,diagnosis in admission same,,,,,,,,,,,,,
,,distrib diagnosis the same,,,,,,,,,,,,,
,,there is source concept in measurement not described,count all instances of concept 0 used for condition_source_concept_id and expect 0,,,,,,,constant,,0,,,
,,primary key checker,,,,,,,,key,constant,0,,,
,,standard concept checker,,,,,,,,standard,constant,0,,,
,,start_datetime should be > end_datetime,,,1,,,,,,constant,0,,,
,,start_date should be > end_date,same as above but for just date,,2,,,,check if also in achilles as two flavors,,constant,0,,,
PROCEDURE_OCCURRENCE,5,<offical name is not helpful>,distinct count (type procedureevents_mv),,,,,,,distinct count,,,,,
,,check label is consistent with source_value,,,,,,,,source_value,,,,,
,,check all CPT code rows inserted,same as first test but for typ=CPT,,,,procedure_type_concept_id = 257,,,distinct count,,,,,
,,check CPT subsections mapped correctly,"count of distinct source values matches for CPT, same as 2",,,,,,,breadth of data (distinct source values),,,,,
,,check ICD procedure rows inserted,distinct count for a third subtype of procedures,,,,,,,distinct count,,,,,
